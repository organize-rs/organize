{
    "type": "object",
    "properties": {
        "rules": {
            "description": "All rules are defined here.",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "enabled": {
                        "type": "boolean"
                    },
                    "subfolders": {
                        "type": "boolean"
                    },
                    "filter_mode": {
                        "enum": [
                            "all",
                            "any",
                            "none"
                        ]
                    },
                    "tags": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                }
                            }
                        ]
                    },
                    "targets": {
                        "enum": [
                            "dirs",
                            "files"
                        ]
                    },
                    "locations": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "array",
                                "items": {
                                    "anyOf": [
                                        {
                                            "type": "string"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "path": {
                                                    "type": "string"
                                                },
                                                "max_depth": {
                                                    "anyOf": [
                                                        {
                                                            "type": "integer"
                                                        },
                                                        {
                                                            "const": null
                                                        }
                                                    ]
                                                },
                                                "search": {
                                                    "enum": [
                                                        "depth",
                                                        "breadth"
                                                    ]
                                                },
                                                "exclude_files": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            }
                                                        }
                                                    ]
                                                },
                                                "exclude_dirs": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            }
                                                        }
                                                    ]
                                                },
                                                "system_exclude_files": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            }
                                                        }
                                                    ]
                                                },
                                                "system_exclude_dirs": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            }
                                                        }
                                                    ]
                                                },
                                                "filter": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            }
                                                        }
                                                    ]
                                                },
                                                "filter_dirs": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            }
                                                        }
                                                    ]
                                                },
                                                "ignore_errors": {
                                                    "type": "boolean"
                                                },
                                                "filesystem": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "path"
                                            ],
                                            "additionalProperties": false
                                        }
                                    ]
                                }
                            }
                        ]
                    },
                    "filters": {
                        "type": "array",
                        "items": {
                            "anyOf": [
                                {
                                    "anyOf": [
                                        {
                                            "description": "Matches files / folders by created date",
                                            "enum": [
                                                "not created",
                                                "created"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {},
                                            "required": [],
                                            "additionalProperties": false
                                        }
                                    ]
                                },
                                {
                                    "anyOf": [
                                        {
                                            "description": "Matches files by the time the file was added to a folder.",
                                            "enum": [
                                                "not date_added",
                                                "date_added"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {},
                                            "required": [],
                                            "additionalProperties": false
                                        }
                                    ]
                                },
                                {
                                    "anyOf": [
                                        {
                                            "description": "Matches files by the time the file was last used.",
                                            "enum": [
                                                "not date_lastused",
                                                "date_lastused"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {},
                                            "required": [],
                                            "additionalProperties": false
                                        }
                                    ]
                                },
                                {
                                    "anyOf": [
                                        {
                                            "description": "A fast duplicate file finder.",
                                            "enum": [
                                                "not duplicate",
                                                "duplicate"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {},
                                            "required": [],
                                            "additionalProperties": false
                                        }
                                    ]
                                },
                                {
                                    "anyOf": [
                                        {
                                            "description": "Filter by image EXIF data",
                                            "enum": [
                                                "not exif",
                                                "exif"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {},
                                            "required": [],
                                            "additionalProperties": false
                                        }
                                    ]
                                },
                                {
                                    "anyOf": [
                                        {
                                            "description": "Filter by file extension",
                                            "enum": [
                                                "not extension",
                                                "extension"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {},
                                            "required": [],
                                            "additionalProperties": false
                                        }
                                    ]
                                },
                                {
                                    "anyOf": [
                                        {
                                            "description": "Matches file content with the given regular expression",
                                            "enum": [
                                                "not filecontent",
                                                "filecontent"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {},
                                            "required": [],
                                            "additionalProperties": false
                                        }
                                    ]
                                },
                                {
                                    "anyOf": [
                                        {
                                            "description": "Calculates the hash of a file.",
                                            "enum": [
                                                "not hash",
                                                "hash"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {},
                                            "required": [],
                                            "additionalProperties": false
                                        }
                                    ]
                                },
                                {
                                    "anyOf": [
                                        {
                                            "description": "Match files and folders by name",
                                            "enum": [
                                                "not name",
                                                "name"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {},
                                            "required": [],
                                            "additionalProperties": false
                                        }
                                    ]
                                },
                                {
                                    "anyOf": [
                                        {
                                            "description": "Matches files and folders by size",
                                            "enum": [
                                                "not size",
                                                "size"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {},
                                            "required": [],
                                            "additionalProperties": false
                                        }
                                    ]
                                },
                                {
                                    "anyOf": [
                                        {
                                            "description": "Matches files by last modified date",
                                            "enum": [
                                                "not lastmodified",
                                                "lastmodified"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {},
                                            "required": [],
                                            "additionalProperties": false
                                        }
                                    ]
                                },
                                {
                                    "anyOf": [
                                        {
                                            "description": "Filter by macOS tags",
                                            "enum": [
                                                "not macos_tags",
                                                "macos_tags"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {},
                                            "required": [],
                                            "additionalProperties": false
                                        }
                                    ]
                                },
                                {
                                    "anyOf": [
                                        {
                                            "description": "Filter by MIME type associated with the file extension.",
                                            "enum": [
                                                "not mimetype",
                                                "mimetype"
                                            ]
                                        },
                                        {
                                            "type": "object",
                                            "properties": {},
                                            "required": [],
                                            "additionalProperties": false
                                        }
                                    ]
                                },
                                {
                                    "type": "object",
                                    "properties": {},
                                    "required": [],
                                    "additionalProperties": false
                                }
                            ]
                        }
                    },
                    "actions": {
                        "type": "array",
                        "items": {
                            "anyOf": [
                                {
                                    "anyOf": [
                                        {
                                            "const": "confirm"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "confirm": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "type": "object",
                                                            "properties": {
                                                                "msg": {
                                                                    "type": "string"
                                                                },
                                                                "default": {
                                                                    "type": "boolean"
                                                                }
                                                            },
                                                            "required": [],
                                                            "additionalProperties": false
                                                        }
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "confirm"
                                            ],
                                            "additionalProperties": false
                                        }
                                    ]
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "copy": {
                                            "anyOf": [
                                                {
                                                    "type": "string"
                                                },
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "dest": {
                                                            "type": "string"
                                                        },
                                                        "on_conflict": {
                                                            "enum": [
                                                                "skip",
                                                                "overwrite",
                                                                "trash",
                                                                "rename_new",
                                                                "rename_existing"
                                                            ]
                                                        },
                                                        "rename_template": {
                                                            "type": "string"
                                                        },
                                                        "filesystem": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "required": [
                                                        "dest"
                                                    ],
                                                    "additionalProperties": false
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "copy"
                                    ],
                                    "additionalProperties": false
                                },
                                {
                                    "const": "delete"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "echo": {
                                            "type": "string"
                                        }
                                    },
                                    "required": [
                                        "echo"
                                    ],
                                    "additionalProperties": false
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "macos_tags": {
                                            "anyOf": [
                                                {
                                                    "type": "string"
                                                },
                                                {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "macos_tags"
                                    ],
                                    "additionalProperties": false
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "move": {
                                            "anyOf": [
                                                {
                                                    "type": "string"
                                                },
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "dest": {
                                                            "type": "string"
                                                        },
                                                        "on_conflict": {
                                                            "enum": [
                                                                "skip",
                                                                "overwrite",
                                                                "trash",
                                                                "rename_new",
                                                                "rename_existing"
                                                            ]
                                                        },
                                                        "rename_template": {
                                                            "type": "string"
                                                        },
                                                        "filesystem": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "required": [
                                                        "dest"
                                                    ],
                                                    "additionalProperties": false
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "move"
                                    ],
                                    "additionalProperties": false
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "python": {
                                            "anyOf": [
                                                {
                                                    "type": "string"
                                                },
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "code": {
                                                            "type": "string"
                                                        },
                                                        "run_in_simulation": {
                                                            "type": "boolean"
                                                        }
                                                    },
                                                    "required": [
                                                        "code"
                                                    ],
                                                    "additionalProperties": false
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "python"
                                    ],
                                    "additionalProperties": false
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "rename": {
                                            "anyOf": [
                                                {
                                                    "type": "string"
                                                },
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "name": {
                                                            "type": "string"
                                                        },
                                                        "on_conflict": {
                                                            "enum": [
                                                                "skip",
                                                                "overwrite",
                                                                "trash",
                                                                "rename_new",
                                                                "rename_existing"
                                                            ]
                                                        },
                                                        "rename_template": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "required": [
                                                        "name"
                                                    ],
                                                    "additionalProperties": false
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "rename"
                                    ],
                                    "additionalProperties": false
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "shell": {
                                            "anyOf": [
                                                {
                                                    "type": "string"
                                                },
                                                {
                                                    "type": "object",
                                                    "properties": {
                                                        "cmd": {
                                                            "type": "string"
                                                        },
                                                        "run_in_simulation": {
                                                            "type": "boolean"
                                                        },
                                                        "ignore_errors": {
                                                            "type": "boolean"
                                                        },
                                                        "simulation_output": {
                                                            "type": "string"
                                                        },
                                                        "simulation_returncode": {
                                                            "type": "integer"
                                                        }
                                                    },
                                                    "required": [
                                                        "cmd"
                                                    ],
                                                    "additionalProperties": false
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "shell"
                                    ],
                                    "additionalProperties": false
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "symlink": {
                                            "anyOf": [
                                                {
                                                    "type": "string"
                                                },
                                                {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                },
                                                {
                                                    "type": "object",
                                                    "properties": {},
                                                    "required": [],
                                                    "additionalProperties": true
                                                }
                                            ]
                                        }
                                    },
                                    "required": [
                                        "symlink"
                                    ],
                                    "additionalProperties": false
                                },
                                {
                                    "const": "trash"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "write": {
                                            "type": "object",
                                            "properties": {
                                                "text": {
                                                    "type": "string"
                                                },
                                                "path": {
                                                    "type": "string"
                                                },
                                                "mode": {
                                                    "enum": [
                                                        "prepend",
                                                        "append",
                                                        "overwrite"
                                                    ]
                                                },
                                                "newline": {
                                                    "type": "boolean"
                                                },
                                                "clear_before_first_write": {
                                                    "type": "boolean"
                                                },
                                                "filesystem": {
                                                    "type": "string"
                                                }
                                            },
                                            "required": [
                                                "text"
                                            ],
                                            "additionalProperties": false
                                        }
                                    },
                                    "required": [
                                        "write"
                                    ],
                                    "additionalProperties": false
                                }
                            ]
                        }
                    }
                },
                "required": [
                    "locations",
                    "actions"
                ],
                "additionalProperties": false
            }
        }
    },
    "required": [
        "rules"
    ],
    "additionalProperties": false,
    "$id": "https://tfeldmann.de/organize.schema.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "organize rule configuration"
}